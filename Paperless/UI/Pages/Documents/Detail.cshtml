@page
@model DetailModel
@{
    ViewData["Title"] = "Document Details";
}
<div class="container-fluid bg-dark text-light min-vh-100">
    <a href="/Documents" class="btn btn-outline-light my-3">Back to Documents</a>
    <div id="documentDetail" class="row justify-content-center"></div>
</div>
<script>
async function loadDetail() {
    const params = new URLSearchParams(window.location.search);
    const id = params.get('id');
    const res = await fetch(`http://localhost:8085/api/document/${id}`);
    const doc = await res.json();
    document.getElementById('documentDetail').innerHTML = `
        <div class='col-md-8'>
            <div class='card bg-secondary text-light'>
                <div class='card-body'>
                    <h3>${doc.fileName}</h3>
                    <div class='mb-3'>${doc.tags.map(tag => `<span class='badge bg-info me-1'>${tag}</span>`).join('')}</div>
                    <hr>
                    <p><strong>Uploaded:</strong> ${new Date(doc.uploadedAt).toLocaleString()}</p>
                    <p><strong>File Name:</strong> ${doc.fileName}</p>
                    <div class='mt-3'>
                        <h5>Summary</h5>
                        <p>${doc.summary ? doc.summary : '<span class="text-muted">No summary available yet. Summary will be generated automatically after OCR processing.</span>'}</p>
                    </div>
                </div>
                <div class='card-footer'>
                    <button class='btn btn-outline-light' onclick='downloadDocument(${doc.id})'>Download</button>
                </div>
            </div>
        </div>
    `;
}
loadDetail();
</script>
<style>
body, .container-fluid { background: #222 !important; }
.card { border-radius: 12px; }
.badge { font-size: 0.9em; }
</style>